<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tab System with iframes</title>
<style>
  body {
    background-color: #100020;
    font-family: Arial, sans-serif;
  }

  .close-btn {
    font-size: 10px;
  }

  .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
  }

  .tablinks {
      padding: 10px 20px;
      background-color: #f0f0f0;
      border: 1px solid #ccc;
      cursor: pointer;
  }
  .tablinks.active {
    background-color: #d0d0d0; /* Adjust the color as needed */
  }


  .tablinks:hover {
      background-color: #e0e0e0;
  }

  .tab-content {
      height: 850px;
  }

  .tabiframe {
      width: 100%;
      height: 100%;
      display: none;
  }

  .tabiframe.active {
      display: block;
  }
</style>
</head>
  <body style="background-color:black;">
    <div class="tabs">
      <button class="tablinks" onclick="openTab(event, 'Tab3')">
        break://home
      </button>
      <button class="new-tab-btn" onclick="createNewTab()">+</button>
      <button class="new-tab-btn" onclick="closeSelectedTab()">x</button>
    </div>
    <div class="tab-content">
      <iframe
        id="Tab3"
        class="tabiframe"
        src="main.html"
        frameborder="0"
      ></iframe>
    </div>
    <script>
      function closeSelectedTab() {
        var activeTab = document.querySelector(".tablinks.active");
        if (activeTab) {
          closeTab(activeTab);
        }
      }
      function openTab(evt, tabName) {
        var iframes = document.getElementsByClassName("tabiframe");
        for (var i = 0; i < iframes.length; i++) {
          iframes[i].classList.remove("active");
        }

        var iframeToShow = document.getElementById(tabName);
        iframeToShow.classList.add("active");

        var tablinks = document.getElementsByClassName("tablinks");
        for (var i = 0; i < tablinks.length; i++) {
          tablinks[i].classList.remove("active");
        }

        if (evt) {
          evt.currentTarget.classList.add("active");
          addCloseButton(evt.currentTarget);


          evt.currentTarget.textContent = iframeToShow.contentDocument.title;
        }
      }

      function addCloseButton(tabButton) {
            var closeButton = tabButton.querySelector(".close-btn");
            if (closeButton) {
                return;
            }

            var closeBtn = document.createElement("span");
            closeBtn.classList.add("close-btn");
            closeBtn.innerHTML = "&times;";
            tabButton.appendChild(closeBtn);

            closeBtn.addEventListener("click", function (e) {
                e.stopPropagation();
                closeTab(tabButton);
            });
        }

      function closeTab(tabButton) {
        var tabName = tabButton.getAttribute("onclick").match(/'(.*?)'/)[1];
        var iframeToClose = document.getElementById(tabName);
        iframeToClose.classList.remove("active");

        tabButton.remove();
        iframeToClose.remove();

        var activeTab = document.querySelector(".tablinks.active");
        if (activeTab && activeTab.id === tabName) {
          var remainingTabs = document.querySelectorAll(".tablinks");
          if (remainingTabs.length > 0) {
            remainingTabs[0].click();
          }
        }
      }

      function createNewTab() {
        var numTabs = document.querySelectorAll(".tablinks").length;
        var newTabId = "Tab" + (numTabs + 1);

        var newTabButton = document.createElement("button");
        newTabButton.classList.add("tablinks");
        newTabButton.setAttribute("onclick", "openTab(event, '" + newTabId + "')");

        var newIframe = document.createElement("iframe");
        newIframe.id = newTabId;
        newIframe.classList.add("tabiframe");
        newIframe.src = "main.html";
        newIframe.frameBorder = 0;

        var tabsContainer = document.querySelector(".tabs");
        tabsContainer.insertBefore(newTabButton, tabsContainer.lastElementChild);

        var tabContentContainer = document.querySelector(".tab-content");
        tabContentContainer.appendChild(newIframe);

        openTab(null, newTabId);
        addCloseButton(newTabButton);
    }
    tabButton.addEventListener("contextmenu", function (e) {
          e.preventDefault();
          closeTab(tabButton);
    });
    </script>
    <script src="./data/js/nav.js"></script>
              <script src="./data/js/cloak/cloakstore.js"></script>
          <script src="./data/js/cloak/cloak.js"></script>



</body>
</html>
